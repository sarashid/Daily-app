"use strict";(self.webpackChunkDaily=self.webpackChunkDaily||[]).push([["src_app_profiles_profiles_module_ts"],{3760:(S,h,o)=>{o.r(h),o.d(h,{ProfilesModule:()=>T});var p=o(6362),r=o(2263),d=o(9423),c=o(9597),a=o(1915),g=o(4953),e=o(3184),u=o(9291),C=o(6458),I=o(5583),m=o(4633),A=o(266),L=o(1122);function Z(i,l){if(1&i&&e._UZ(0,"button",13),2&i){const t=e.oxw();e.Q6J("disabled",!t.profileForm.valid)}}function F(i,l){1&i&&e._UZ(0,"button",14)}function X(i,l){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.name)}}let b=(()=>{class i{constructor(t,n,s,f){this.profilesService=t,this.route=n,this.router=s,this.footprintService=f,this.sourceList=[],this.targetList=[],this.pageMode="Add",this.urlRoute=g.X.ROUTES.DAILY+"/"+g.X.ROUTES.PROIFLES+"/"+g.X.ROUTES.LIST,this.isActive=1}ngOnInit(){this.route.snapshot.params.id&&(this.profileId=this.route.snapshot.params.id,this.viewMode="view"===this.route.snapshot.url[0].path,this.pageMode=this.viewMode?"View ":"edit"),this.initForm(),"edit"==this.pageMode?this.getProfileByID():this.getPrivilieges()}unassignedPrivileges(t){return this.targetList.forEach(n=>{t=t.filter(s=>s.id!==n.id)}),t}getPrivilieges(){this.profilesService.getPrivilegesList().subscribe(t=>{this.sourceList=this.unassignedPrivileges(t.payload.privileges)})}getProfileByID(){this.getSubscription=this.profilesService.getProfileById(this.profileId).subscribe(t=>{let n=t.payload.profile;this.footprintService.objectIdentifier=n.id;let s={name:n.name,isActive:n.isActive,privileges:n.privileges};s=JSON.parse(JSON.stringify(s)),console.log("profileClone",s),this.footprintService.handleOldValue(s),this.targetList=n.privileges,this.isActive=n.isActive,this.getPrivilieges(),this.profileForm.patchValue({name:n.name}),this.viewMode&&this.profileForm.disable()})}initForm(){this.profileForm=new a.cw({name:new a.NI(null,a.kI.required)})}onSubmit(){let t={name:this.profileForm.value.name,isActive:this.isActive,privileges:this.targetList};"edit"==this.pageMode?(this.footprintService.handleNewValue(t),t.id=this.profileId,this.profilesService.manageProfile(t,this.pageMode).subscribe(n=>{console.log("add profile response",n),0==n.statusCode&&this.router.navigateByUrl(this.urlRoute)})):(this.footprintService.handleNewValue(t),this.profilesService.manageProfile(t).subscribe(n=>{console.log("add profile response",n),0==n.statusCode&&this.router.navigateByUrl(this.urlRoute)})),console.log("Profile",t),console.log("Source list",this.sourceList),console.log("Target list",this.targetList)}ngOnDestroy(){var t;null===(t=this.getSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.L),e.Y36(r.gz),e.Y36(r.F0),e.Y36(C.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-profile"]],decls:18,vars:11,consts:[[1,"add-container"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"profile-form"],[1,"p-float-label"],["id","float-input","type","text","pInputText","","formControlName","name","maxlength","50"],["for","float-input"],[1,"required"],["pButton","","class","btn btn-basic","type","submit","label","submit",3,"disabled",4,"ngIf"],["pButton","","pRipple","","type","Cancel","label","Cancel","class","p-button-danger p-button-text white-button","routerLink","/daily/profiles/list",4,"ngIf"],[1,"picklist-content"],[1,"pickList-title"],["sourceHeader","Unassigned","targetHeader","Assigned","filterBy","name","sourceFilterPlaceholder","Search by name","targetFilterPlaceholder","Search by name",3,"source","target","responsive","dragdrop","showSourceControls","showTargetControls","disabled"],["pTemplate","item"],["pButton","","type","submit","label","submit",1,"btn","btn-basic",3,"disabled"],["pButton","","pRipple","","type","Cancel","label","Cancel","routerLink","/daily/profiles/list",1,"p-button-danger","p-button-text","white-button"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(4,"div",2)(5,"span",3),e._UZ(6,"input",4),e.TgZ(7,"label",5),e._uU(8,"Profile Name "),e.TgZ(9,"span",6),e._uU(10,"*"),e.qZA()()(),e.YNc(11,Z,1,1,"button",7),e.YNc(12,F,1,0,"button",8),e.qZA(),e.TgZ(13,"div",9)(14,"span",10),e._uU(15," Assign Privileges:"),e.qZA(),e.TgZ(16,"p-pickList",11),e.YNc(17,X,2,1,"ng-template",12),e.qZA()()()()),2&t&&(e.xp6(2),e.hij("",n.pageMode,"Profile"),e.xp6(1),e.Q6J("formGroup",n.profileForm),e.xp6(8),e.Q6J("ngIf",!n.viewMode),e.xp6(1),e.Q6J("ngIf",!n.viewMode),e.xp6(4),e.Q6J("source",n.sourceList)("target",n.targetList)("responsive",!0)("dragdrop",!0)("showSourceControls",!1)("showTargetControls",!1)("disabled",n.viewMode))},directives:[a._Y,a.JL,a.sg,a.Fj,I.o,a.JJ,a.u,a.nD,p.O5,m.Hq,r.rH,A.G,L.jx],styles:[".add-container[_ngcontent-%COMP%] {\n  padding: 0px 40px 40px 40px;\n}\n.add-container[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%] {\n  display: inline-flex;\n}\n.add-container[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  margin-left: 40px;\n}\n.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%] {\n  margin-top: 15px;\n}\n.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%]   .pickList-title[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--primaryColor);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1wcm9maWxlLmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXERhaWx5JTIwQXBwXFxEYWlseVxcc3JjXFxhcHBcXHByb2ZpbGVzXFxjb21wb25lbnRzXFxhZGQtcHJvZmlsZVxcYWRkLXByb2ZpbGUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwyQkFBQTtBQ0NGO0FEQUU7RUFDRSxvQkFBQTtBQ0VKO0FEREk7RUFDRSxpQkFBQTtBQ0dOO0FEQUU7RUFDRSxnQkFBQTtBQ0VKO0FEREk7RUFDRSxnQkFBQTtFQUNBLDBCQUFBO0FDR04iLCJmaWxlIjoiYWRkLXByb2ZpbGUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYWRkLWNvbnRhaW5lciB7XHJcbiAgcGFkZGluZzogMHB4IDQwcHggNDBweCA0MHB4O1xyXG4gIC5wcm9maWxlLWZvcm0ge1xyXG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XHJcbiAgICBidXR0b24ge1xyXG4gICAgICBtYXJnaW4tbGVmdDogNDBweDtcclxuICAgIH1cclxuICB9XHJcbiAgLnBpY2tsaXN0LWNvbnRlbnQge1xyXG4gICAgbWFyZ2luLXRvcDogMTVweDtcclxuICAgIC5waWNrTGlzdC10aXRsZSB7XHJcbiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5Q29sb3IpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIuYWRkLWNvbnRhaW5lciB7XG4gIHBhZGRpbmc6IDBweCA0MHB4IDQwcHggNDBweDtcbn1cbi5hZGQtY29udGFpbmVyIC5wcm9maWxlLWZvcm0ge1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbn1cbi5hZGQtY29udGFpbmVyIC5wcm9maWxlLWZvcm0gYnV0dG9uIHtcbiAgbWFyZ2luLWxlZnQ6IDQwcHg7XG59XG4uYWRkLWNvbnRhaW5lciAucGlja2xpc3QtY29udGVudCB7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG59XG4uYWRkLWNvbnRhaW5lciAucGlja2xpc3QtY29udGVudCAucGlja0xpc3QtdGl0bGUge1xuICBmb250LXdlaWdodDogNjAwO1xuICBjb2xvcjogdmFyKC0tcHJpbWFyeUNvbG9yKTtcbn0iXX0= */"]}),i})();var x=o(267),v=o(111),y=o(6709);let B=(()=>{class i{constructor(t,n,s){this.profilesService=t,this.router=n,this.privilegesService=s,this.profilesTable=new x.G,this.profilesList=[],this.headers=[{fieldId:"name",title:"Profile"}],this.extraCols=[{fieldId:"lockFlag",title:"Actions",show:!0},{fieldId:"search",title:"search",show:!0}]}ngOnInit(){this.enableUpdate=this.privilegesService.checkPrivileges(c.$.PROFILES_MANAGMENT.UPDATE),this.enableDelete=this.privilegesService.checkPrivileges(c.$.PROFILES_MANAGMENT.DELETE),this.viewDetails=this.privilegesService.checkPrivileges(c.$.PROFILES_MANAGMENT.GET_BY_ID),this.profilesService.showSubject.next(this.router.url.includes("list")),this.listSubscription=this.profilesService.getProfilesList().subscribe(t=>{console.log("ProfilesList",t.payload.profilesList),this.profilesList=t.payload.profilesList,this.fillTable()})}fillTable(){this.profilesTable.cols=this.headers,this.profilesTable.extracols=this.extraCols,this.profilesTable.pagination=!0,this.profilesTable.lockFlag=!0,this.profilesTable.editFlag=!0,this.profilesTable.deleteFlag=!0,this.profilesTable.name="profiles",this.profilesTable.globalFilterFields=["name"],this.profilesTable.data=this.profilesList}ngOnDestroy(){var t;null===(t=this.listSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.L),e.Y36(r.F0),e.Y36(v.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profiles-list"]],decls:2,vars:4,consts:[[1,"mt-3"],[3,"table","enableDelete","enableUpdate","viewDetails"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-table",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("table",n.profilesTable)("enableDelete",n.enableDelete)("enableUpdate",n.enableUpdate)("viewDetails",n.viewDetails))},directives:[y.a],styles:["\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9maWxlcy1saXN0LmNvbXBvbmVudC5zY3NzIn0= */"]}),i})();function G(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addProfile()}),e.qZA()}}function P(i,l){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,G,1,0,"button",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.enableAdd)}}const W=[{path:"",component:(()=>{class i{constructor(t,n,s,f){this.router=t,this.profilesService=n,this.cdr=s,this.privilegesService=f}ngOnInit(){this.enableAdd=this.privilegesService.checkPrivileges(c.$.PROFILES_MANAGMENT.ADD),this.showSubscription=this.profilesService.showSubject.subscribe(t=>{this.showBtn=t,this.cdr.detectChanges()})}addProfile(){this.router.navigateByUrl("daily/profiles/add"),this.showBtn=!1}ngOnDestroy(){var t;null===(t=this.showSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.F0),e.Y36(u.L),e.Y36(e.sBO),e.Y36(v.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profiles-management"]],decls:9,vars:1,consts:[[1,"layout-margin"],[1,"page-header"],[1,"page-title"],[1,"icon-profiles","head-icon"],[1,"head-font"],["class","page-action",4,"ngIf"],[1,"router-content"],[1,"page-action"],["pButton","","pRipple","","type","button","label","+ Add New Profile","class","p-button-danger p-button-text white-button",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","+ Add New Profile",1,"p-button-danger","p-button-text","white-button",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e._uU(5," Profiles Management"),e.qZA()(),e.YNc(6,P,2,1,"div",5),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"router-outlet"),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("ngIf",n.showBtn))},directives:[p.O5,m.Hq,r.lC],styles:[".layout-margin[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%] {\n  padding: 0 9px;\n  display: flex;\n  justify-content: space-between;\n}\n.layout-margin[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-action[_ngcontent-%COMP%] {\n  padding-right: 89px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2ZpbGVzLW1hbmFnZW1lbnQuY29tcG9uZW50LnNjc3MiLCIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcRGFpbHklMjBBcHBcXERhaWx5XFxzcmNcXGFwcFxccHJvZmlsZXNcXGxheW91dHNcXHByb2ZpbGVzLW1hbmFnZW1lbnRcXHByb2ZpbGVzLW1hbmFnZW1lbnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDSSxjQUFBO0VBQ0EsYUFBQTtFQUNBLDhCQUFBO0FDQVI7QURDUTtFQUNJLG1CQUFBO0FDQ1oiLCJmaWxlIjoicHJvZmlsZXMtbWFuYWdlbWVudC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sYXlvdXQtbWFyZ2luIHtcclxuICAgIC5wYWdlLWhlYWRlciB7XHJcbiAgICAgICAgcGFkZGluZzogMCA5cHg7XHJcbiAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICAgICAgLnBhZ2UtYWN0aW9uIHtcclxuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogODlweDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLmxheW91dC1tYXJnaW4gLnBhZ2UtaGVhZGVyIHtcbiAgcGFkZGluZzogMCA5cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn1cbi5sYXlvdXQtbWFyZ2luIC5wYWdlLWhlYWRlciAucGFnZS1hY3Rpb24ge1xuICBwYWRkaW5nLXJpZ2h0OiA4OXB4O1xufSJdfQ== */"]}),i})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:B},{path:"add",component:b,canActivate:[d.C],data:{privilege:c.$.PROFILES_MANAGMENT.ADD}},{path:"edit/:id",component:b,canActivate:[d.C],data:{privilege:c.$.PROFILES_MANAGMENT.UPDATE}},{path:"view/:id",component:b,canActivate:[d.C],data:{privilege:c.$.PROFILES_MANAGMENT.GET_BY_ID}}]}];let M=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[r.Bz.forChild(W)],r.Bz]}),i})();var w=o(4466);let T=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,M,w.m]]}),i})()}}]);
//# sourceMappingURL=src_app_profiles_profiles_module_ts.js.map