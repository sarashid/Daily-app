{"version":3,"file":"src_app_manual-adjustment_manual-adjustment_module_ts.js","mappings":"mSAIA,MAAMA,EAAiB,CACrB,CAAEC,KAAM,GAAIC,WAAY,aAAcC,UAAW,QACjD,CAAEF,KAAM,aAAcG,UCUxB,MAAM,QAmCJC,YACUC,EACAC,EACAC,EACAC,GAHAC,qBACAA,yBACAA,yBACAA,yBAtCVA,WAAgB,oBAEhBA,qBAAkB,IAAIC,IAItBD,aAAU,CACR,CAAEE,QAAS,WAAYC,MAAO,aAC9B,CAAED,QAAS,UAAWC,MAAO,UAAWC,WAAY,mBACpD,CAAEF,QAAS,UAAWC,MAAO,UAAWC,WAAY,kBACpD,CAAEF,QAAS,WAAYC,MAAO,WAAYC,WAAY,kBAGxDJ,eAAY,CACV,CACEE,QAAS,eACTG,MAAO,cACPF,MAAO,kBACPG,MAAM,EACNC,KAAM,QACNC,UAAW,UAEb,CACEN,QAAS,aACTC,MAAO,SACPI,KAAM,WACNE,KAAM,GACNC,YAAa,GACbJ,MAAM,EACNK,YAAa,qBAYjBC,WACEZ,KAAKa,kBAAoBb,KAAKD,kBAAkBe,gBAC9CC,8BAEFf,KAAKH,kBAAkBmB,2BAA2BC,UAAWC,IAC3DlB,KAAKmB,UAAU,GAAGV,KAAOS,EAAKE,QAAQC,qBACtCrB,KAAKmB,UAAU,GAAGT,YAAcV,KAAKmB,UAAU,GAAGT,YAChD,cACFV,KAAKmB,UAAU,GAAGV,KAAOS,EAAKE,QAAQC,uBAExCrB,KAAKsB,UAAYC,aAAaC,QAAQ,QAEtCxB,KAAKyB,UACLzB,KAAK0B,iBAAmB1B,KAAKJ,cAAc+B,YAAYV,UAAWW,IAChE5B,KAAKsB,UAAYM,EACjB5B,KAAKyB,YAITI,UAAUC,GACR9B,KAAK+B,aAAeC,KAAKC,MAAMD,KAAKE,UAAUJ,IAC9C9B,KAAKmC,gBAAgBC,KAAOpC,KAAKqC,QACjCrC,KAAKmC,gBAAgBG,UAAYtC,KAAKmB,UACtCnB,KAAKmC,gBAAgBI,YAAa,EAClCvC,KAAKmC,gBAAgBK,KAAO,mBAC5BxC,KAAKmC,gBAAgB1B,KAAOqB,EAC5B9B,KAAKmC,gBAAgBM,UAAW,EAChCzC,KAAKmC,gBAAgBO,UAAW,EAChC1C,KAAKmC,gBAAgBQ,YAAa,EAClC3C,KAAKmC,gBAAgBS,WAAY,EACjC5C,KAAKmC,gBAAgBU,mBAAqB,CACxC,WACA,UACA,UACA,YAGJpB,UACEzB,KAAK8C,aAAe9C,KAAKF,kBACtBiD,oBAAoB/C,KAAKsB,WACzBL,UAAWC,UACVlB,KAAK8B,UAAYZ,EAAKE,QACR,QAAd4B,OAAKlB,iBAASmB,SAAEC,IAAKC,IACnBA,EAAKC,cAAgBD,EAAKE,WAE5BrD,KAAK6B,UAAU7B,KAAK8B,aAG1BwB,cACEtD,KAAK8C,aAAaS,cAClBvD,KAAK0B,iBAAiB6B,4DA5FbC,GAAyBC,sEAAzBD,EAAyBE,+OChBtCD,iBAA2B,UAA3BA,CAA2B,WAGrBA,eACAA,kBAAmBA,6BAAiBA,YAGxCA,uBAEFA,eAFaA,0CAAyB,wCAAzBA,CAAyB,goDDSzBD,GAAb,KDHO,IAAMG,EAAb,MAAM,sDAAOA,4DAHF,CAACC,cAAsBtE,IACtBsE,QAECD,GAAb,iBGFO,IAAME,EAAb,MAAM,sDAAOA,4DAFF,CAACC,KAAcH,EAA+BI,QAE5CF,GAAb","names":["routes","path","redirectTo","pathMatch","component","constructor","headerService","validationService","adjustmentService","privilegesService","this","TableModel","fieldId","title","classStyle","label","show","type","inputType","data","optionLabel","placeholder","ngOnInit","enableUpdatePatch","checkPrivileges","PRIVILEGES","retrieveTransactionTypes","subscribe","resp","extraCols","payload","transactionModelList","epochDate","localStorage","getItem","getData","dateSubscription","DateSubject","date","fillTable","tableData","originalData","JSON","parse","stringify","adjustmentTable","cols","headers","extracols","pagination","name","lockFlag","editFlag","deleteFlag","hasSubmit","globalFilterFields","manualSubscr","getManualAdjustment","l","_a","map","item","numberOfSubs","variance","ngOnDestroy","unsubscribe","ManualAdjustmentComponent","i0","selectors","ManualAdjustmentRoutingModule","RouterModule","ManualAdjustmentModule","CommonModule","SharedModule"],"sourceRoot":"webpack:///","sources":["./src/app/manual-adjustment/manual-adjustment-routing.module.ts","./src/app/manual-adjustment/layout/manual-adjustment/manual-adjustment.component.ts","./src/app/manual-adjustment/layout/manual-adjustment/manual-adjustment.component.html","./src/app/manual-adjustment/manual-adjustment.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ManualAdjustmentComponent } from './layout/manual-adjustment/manual-adjustment.component';\n\nconst routes: Routes = [\n  { path: '', redirectTo: 'adjustment', pathMatch: 'full' },\n  { path: 'adjustment', component: ManualAdjustmentComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ManualAdjustmentRoutingModule { }\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { HeaderService } from 'src/app/core/services/header-service/header.service';\r\nimport { Tab } from 'src/app/shared/models/tab.model';\r\nimport { TableModel } from 'src/app/shared/models/table.model';\r\nimport { PrivilegesService } from 'src/app/shared/services/privileges-service/privileges.service';\r\nimport { PRIVILEGES } from 'src/app/shared/statics/privileges';\r\nimport { ValidationService } from 'src/app/validation/services/validation.service';\r\nimport { ManualAdjustment } from '../../models/manual-adjustment.model';\r\nimport { AdjustmentService } from '../../services/adjustment.service';\r\n\r\n@Component({\r\n  selector: 'app-manual-adjustment',\r\n  templateUrl: './manual-adjustment.component.html',\r\n  styleUrls: ['./manual-adjustment.component.scss'],\r\n})\r\nexport class ManualAdjustmentComponent implements OnInit, OnDestroy {\r\n  title: string = 'Manual Adjustment';\r\n  tabs!: Tab[];\r\n  adjustmentTable = new TableModel();\r\n  dateSubscription!: Subscription;\r\n  epochDate!: any;\r\n  manualSubscr!: Subscription;\r\n  headers = [\r\n    { fieldId: 'ratePlan', title: 'Rate Plan' },\r\n    { fieldId: 'opening', title: 'Opening', classStyle: 'green tab-style' },\r\n    { fieldId: 'closing', title: 'Closing', classStyle: 'blue tab-style' },\r\n    { fieldId: 'variance', title: 'Variance', classStyle: 'red tab-style' },\r\n  ];\r\n  tableData!: ManualAdjustment[];\r\n  extraCols = [\r\n    {\r\n      fieldId: 'numberOfSubs',\r\n      label: 'Num Of Subs',\r\n      title: 'Export as Excel',\r\n      show: true,\r\n      type: 'input',\r\n      inputType: 'number',\r\n    },\r\n    {\r\n      fieldId: 'trxTypeKey',\r\n      title: 'search',\r\n      type: 'dropdown',\r\n      data: [],\r\n      optionLabel: '',\r\n      show: true,\r\n      placeholder: 'Transaction Type',\r\n    },\r\n  ];\r\n  enableUpdatePatch!: boolean;\r\n  originalData!: any[];\r\n  constructor(\r\n    private headerService: HeaderService,\r\n    private validationService: ValidationService,\r\n    private adjustmentService: AdjustmentService,\r\n    private privilegesService: PrivilegesService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.enableUpdatePatch = this.privilegesService.checkPrivileges(\r\n      PRIVILEGES.MANUAL_ADJUSTMENT.UPDATE\r\n    );\r\n    this.validationService.retrieveTransactionTypes().subscribe((resp) => {\r\n      this.extraCols[0].data = resp.payload.transactionModelList;\r\n      this.extraCols[0].optionLabel = this.extraCols[1].optionLabel =\r\n        'trxTypeName';\r\n      this.extraCols[1].data = resp.payload.transactionModelList;\r\n    });\r\n    this.epochDate = localStorage.getItem('date');\r\n\r\n    this.getData();\r\n    this.dateSubscription = this.headerService.DateSubject.subscribe((date) => {\r\n      this.epochDate = date;\r\n      this.getData();\r\n    });\r\n  }\r\n\r\n  fillTable(tableData: any) {\r\n    this.originalData = JSON.parse(JSON.stringify(tableData));\r\n    this.adjustmentTable.cols = this.headers;\r\n    this.adjustmentTable.extracols = this.extraCols;\r\n    this.adjustmentTable.pagination = true;\r\n    this.adjustmentTable.name = 'manualAdjustment';\r\n    this.adjustmentTable.data = tableData;\r\n    this.adjustmentTable.lockFlag = false;\r\n    this.adjustmentTable.editFlag = false;\r\n    this.adjustmentTable.deleteFlag = false;\r\n    this.adjustmentTable.hasSubmit = true;\r\n    this.adjustmentTable.globalFilterFields = [\r\n      'ratePlan',\r\n      'opening',\r\n      'closing',\r\n      'variance',\r\n    ];\r\n  }\r\n  getData() {\r\n    this.manualSubscr = this.adjustmentService\r\n      .getManualAdjustment(this.epochDate)\r\n      .subscribe((resp) => {\r\n        this.tableData = resp.payload;\r\n        this.tableData?.map((item:any) => {\r\n          item.numberOfSubs = -item.variance;\r\n        });\r\n        this.fillTable(this.tableData);\r\n      });\r\n  }\r\n  ngOnDestroy(): void {\r\n    this.manualSubscr.unsubscribe();\r\n    this.dateSubscription.unsubscribe();\r\n  }\r\n}\r\n","<div class=\"layout-margin\">\r\n  <div class=\"row flex header\">\r\n    <div class=\"col-7 flex pt-4\">\r\n      <i class=\"icon-manual\"></i>\r\n      <span class=\"text\">Manual Adjustment</span>\r\n    </div>\r\n  </div>\r\n  <app-table [table]=\"adjustmentTable\" [enableUpdatePatch]=\"enableUpdatePatch\"\r\n  [originalData]=\"originalData\"></app-table>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ManualAdjustmentRoutingModule } from './manual-adjustment-routing.module';\r\nimport { ManualAdjustmentComponent } from './layout/manual-adjustment/manual-adjustment.component';\r\nimport { SharedModule } from '../shared/shared.module';\r\n\r\n@NgModule({\r\n  declarations: [ManualAdjustmentComponent],\r\n  imports: [CommonModule, ManualAdjustmentRoutingModule, SharedModule],\r\n})\r\nexport class ManualAdjustmentModule {}\r\n"]}